"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e,n=require("react/jsx-runtime"),r=require("react"),t=require("styled-components"),i=(e=t)&&"object"==typeof e&&"default"in e?e.default:e,o=function(){return o=Object.assign||function(e){for(var n,r=1,t=arguments.length;r<t;r++)for(var i in n=arguments[r])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},o.apply(this,arguments)};function s(e,n){return Object.defineProperty?Object.defineProperty(e,"raw",{value:n}):e.raw=n,e}function a(e){var r=e.types,t=e.minSize,i=e.maxSize;if(r){var s=r.toString(),a="";return i&&(a+="size >= "+i+", "),t&&(a+="size <= "+t+", "),n.jsx("span",o({title:a+"types: "+s,className:"file-types"},{children:s}),void 0)}return null}var l=0;function d(){return n.jsxs("svg",o({width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},{children:[n.jsx("path",{d:"M5.33317 6.66667H22.6665V16H25.3332V6.66667C25.3332 5.196 24.1372 4 22.6665 4H5.33317C3.8625 4 2.6665 5.196 2.6665 6.66667V22.6667C2.6665 24.1373 3.8625 25.3333 5.33317 25.3333H15.9998V22.6667H5.33317V6.66667Z",fill:"#0658C2"},void 0),n.jsx("path",{d:"M10.6665 14.6667L6.6665 20H21.3332L15.9998 12L11.9998 17.3333L10.6665 14.6667Z",fill:"#0658C2"},void 0),n.jsx("path",{d:"M25.3332 18.6667H22.6665V22.6667H18.6665V25.3333H22.6665V29.3333H25.3332V25.3333H29.3332V22.6667H25.3332V18.6667Z",fill:"#0658C2"},void 0)]}),void 0)}var p,c,u,f,v,x=function(e){return e/1e3/1e3},h=function(e){return void 0===e?"":e.map((function(e){return"."+e.toLowerCase()})).join(",")},g=t.css(p||(p=s(["\n  display: flex;\n  align-items: center;\n  min-width: 322px;\n  max-width: 508px;\n  height: 48px;\n  border: dashed 2px ",";\n  padding: 8px 16px 8px 8px;\n  border-radius: 5px;\n  cursor: pointer;\n  flex-grow: 0;\n"],["\n  display: flex;\n  align-items: center;\n  min-width: 322px;\n  max-width: 508px;\n  height: 48px;\n  border: dashed 2px ",";\n  padding: 8px 16px 8px 8px;\n  border-radius: 5px;\n  cursor: pointer;\n  flex-grow: 0;\n"])),"#0658c2"),m=i.label(c||(c=s(["\n  position: relative;\n  ",";\n  &.is-disabled {\n    border: dashed 2px ",";\n    cursor: no-drop;\n    svg {\n      fill: ",";\n      color: ",";\n      path {\n        fill: ",";\n        color: ",";\n      }\n    }\n  }\n  & > input {\n    display: none;\n  }\n"],["\n  position: relative;\n  ",";\n  &.is-disabled {\n    border: dashed 2px ",";\n    cursor: no-drop;\n    svg {\n      fill: ",";\n      color: ",";\n      path {\n        fill: ",";\n        color: ",";\n      }\n    }\n  }\n  & > input {\n    display: none;\n  }\n"])),(function(e){return e.overRide?"":g}),"#666","#666","#666","#666","#666"),b=i.div(u||(u=s(["\n  border: dashed 2px ",";\n  border-radius: 5px;\n  background-color: ",";\n  opacity: 0.5;\n  position: absolute;\n  top: 0;\n  right: 0;\n  left: 0;\n  bottom: 0;\n  & > span {\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    transform: translateX(-50%) translateY(-50%);\n  }\n"],["\n  border: dashed 2px ",";\n  border-radius: 5px;\n  background-color: ",";\n  opacity: 0.5;\n  position: absolute;\n  top: 0;\n  right: 0;\n  left: 0;\n  bottom: 0;\n  & > span {\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    transform: translateX(-50%) translateY(-50%);\n  }\n"])),"#666","#999"),j=i.div(f||(f=s(["\n  display: flex;\n  justify-content: space-between;\n  flex-grow: 1;\n  & > span {\n    font-size: 12px;\n    color: ",";\n  }\n  .file-types {\n    overflow: hidden;\n    white-space: nowrap;\n    text-overflow: ellipsis;\n    max-width: 100px;\n  }\n"],["\n  display: flex;\n  justify-content: space-between;\n  flex-grow: 1;\n  & > span {\n    font-size: 12px;\n    color: ",";\n  }\n  .file-types {\n    overflow: hidden;\n    white-space: nowrap;\n    text-overflow: ellipsis;\n    max-width: 100px;\n  }\n"])),(function(e){return e.error?"red":"#666"})),w=i.span(v||(v=s(["\n  font-size: 14px;\n  color: ",";\n  span {\n    text-decoration: underline;\n  }\n"],["\n  font-size: 14px;\n  color: ",";\n  span {\n    text-decoration: underline;\n  }\n"])),"#666"),y=function(e,r,t,i,o){return t?n.jsx("span",{children:"File type/size error, Hovered on types!"},void 0):n.jsx(w,{children:i?n.jsx("span",{children:"Upload disabled"},void 0):e||r?n.jsxs(n.Fragment,{children:[n.jsx("span",{children:"Uploaded Successfully!."},void 0)," Upload another?"]},void 0):n.jsx(n.Fragment,{children:o?n.jsxs(n.Fragment,{children:[n.jsx("span",{children:o.split(" ")[0]},void 0)," ",o.substr(o.indexOf(" ")+1)]},void 0):n.jsxs(n.Fragment,{children:[n.jsx("span",{children:"Upload"},void 0)," or drop a file right here"]},void 0)},void 0)},void 0)};exports.FileUploader=function(e){var t=e.name,i=e.hoverTitle,s=e.types,p=e.handleChange,c=e.classes,u=e.children,f=e.maxSize,v=e.minSize,g=e.fileOrFiles,w=e.onSizeError,z=e.onTypeError,C=e.onSelect,L=e.onDrop,E=e.disabled,F=e.label,H=e.multiple,S=r.useRef(null),V=r.useRef(null),k=r.useState(!1),D=k[0],O=k[1],P=r.useState(null),R=P[0],T=P[1],U=r.useState(!1),M=U[0],q=U[1],Z=function(e){return s&&!function(e,n){var r=e.type.toLocaleLowerCase(),t=r.lastIndexOf("/"),i=r.substring(t+1);return n.map((function(e){return e.toLowerCase()})).includes(i)}(e,s)?(q(!0),z&&z("File type is not supported"),!1):f&&x(e.size)>f?(q(!0),w&&w("File size is too big"),!1):!(v&&x(e.size)<v)||(q(!0),w&&w("File size is too small"),!1)},N=function(e){var n=!1;if(e){if(e instanceof File)n=!Z(e);else{console.log("files else File",e);for(var r=0;r<e.length;r++){var t=e[r];n=!Z(t)||n}}return!n&&(p&&p(e),T(e),O(!0),q(!1),!0)}return!1},X=function(e){var n=e.labelRef,t=e.inputRef,i=e.multiple,o=e.handleChanges,s=e.onDrop,a=r.useState(!1),d=a[0],p=a[1],c=r.useCallback((function(){t.current.click()}),[t]),u=r.useCallback((function(e){e.preventDefault(),e.stopPropagation(),l++,e.dataTransfer.items&&0!==e.dataTransfer.items.length&&p(!0)}),[]),f=r.useCallback((function(e){e.preventDefault(),e.stopPropagation(),--l>0||p(!1)}),[]),v=r.useCallback((function(e){e.preventDefault(),e.stopPropagation()}),[]),x=r.useCallback((function(e){e.preventDefault(),e.stopPropagation(),p(!1),l=0;var n=e.dataTransfer.files;if(n&&n.length>0){var r=i?n:n[0],t=o(r);s&&t&&s(r),e.dataTransfer.clearData()}}),[o]);return r.useEffect((function(){var e=n.current;return e.addEventListener("click",c),e.addEventListener("dragenter",u),e.addEventListener("dragleave",f),e.addEventListener("dragover",v),e.addEventListener("drop",x),function(){e.removeEventListener("click",c),e.removeEventListener("dragenter",u),e.removeEventListener("dragleave",f),e.removeEventListener("dragover",v),e.removeEventListener("drop",x)}}),[c,u,f,v,x,n]),d}({labelRef:S,inputRef:V,multiple:H,handleChanges:N,onDrop:L});return r.useEffect((function(){g?(O(!0),T(g)):(O(!1),T(null))}),[g]),n.jsxs(m,o({overRide:u,className:(c||"")+" "+(E?"is-disabled":""),ref:S,htmlFor:t},{children:[n.jsx("input",{onChange:function(e){var n=e.target.files,r=H?n:n[0],t=N(r);C&&t&&C(r)},accept:h(s),ref:V,type:"file",name:t,disabled:E,multiple:H},void 0),X&&n.jsx(b,{children:n.jsx("span",{children:i||"Drop Here"},void 0)},void 0),!u&&n.jsxs(n.Fragment,{children:[n.jsx(d,{},void 0),n.jsxs(j,o({error:M},{children:[y(R,D,M,E,F),n.jsx(a,{types:s,minSize:v,maxSize:f},void 0)]}),void 0)]},void 0),u]}),void 0)};
