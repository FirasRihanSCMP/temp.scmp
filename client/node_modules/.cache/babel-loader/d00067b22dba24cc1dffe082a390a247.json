{"ast":null,"code":"import _asyncToGenerator from\"F:\\\\Website\\\\SCMP WebDev\\\\client\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";import _slicedToArray from\"F:\\\\Website\\\\SCMP WebDev\\\\client\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\slicedToArray.js\";import _regeneratorRuntime from\"F:\\\\Website\\\\SCMP WebDev\\\\client\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React from\"react\";import{getFullDate}from\"./getFullDate\";import\"./uploader.css\";import{useState}from\"react\";import axios from\"axios\";import{toast}from\"react-toastify\";import DatePicker from'sassy-datepicker';import{Row,Button,Col}from\"react-bootstrap\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Uploader(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),files=_useState2[0],setFiles=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),file=_useState4[0],setFile=_useState4[1];var _useState5=useState(new Date()),_useState6=_slicedToArray(_useState5,2),date=_useState6[0],setDate=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),brief=_useState8[0],setBrief=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),title=_useState10[0],setTitle=_useState10[1];var _useState11=useState(''),_useState12=_slicedToArray(_useState11,2),paragraph=_useState12[0],setParagraph=_useState12[1];var navigate=useNavigate();var FinalDate=\"\";var dateHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(date){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:FinalDate=getFullDate(date.toString());_context.next=3;return setDate(FinalDate);case 3:case\"end\":return _context.stop();}}},_callee);}));return function dateHandler(_x){return _ref.apply(this,arguments);};}();var onInputChangeMultiple=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return setFiles(e.target.files);case 2:case\"end\":return _context2.stop();}}},_callee2);}));return function onInputChangeMultiple(_x2){return _ref2.apply(this,arguments);};}();var onInputChange=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(e){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return setFile(e.target.files);case 2:case\"end\":return _context3.stop();}}},_callee3);}));return function onInputChange(_x3){return _ref3.apply(this,arguments);};}();var onSubmitFile=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(e){var data,i,text;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:e.preventDefault();data=new FormData();console.log(files);console.log(file);for(i=0;i<files.length;i++){data.append(\"file2\",files[i]);}data.append(\"file\",file[0]);/*  data.append(\"title\",title)\r\n      data.append(\"brief\",brief)\r\n      data.append(\"paragraph\",paragraph)\r\n      data.append(\"date\",date)  */text=data.append('title',title);data.append('brief',brief);data.append('paragraph',paragraph);data.append('date',date);if(!window.confirm(\"Press a button!\")){_context4.next=13;break;}_context4.next=13;return axios.post(\"http://188.166.60.231:3002/api/EventUpload\",data).then(function(e){toast.success(\"Upload success\");setTimeout(function(){navigate(\"/Events\");},3000);}).catch(function(e){console.log(e);toast.error(\"Upload error\");});case 13:case\"end\":return _context4.stop();}}},_callee4);}));return function onSubmitFile(_x4){return _ref4.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"form\",{method:\"post\",action:\"#\",id:\"#\",className:'eventForm',onSubmit:onSubmitFile,children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsxs(Col,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group files\",children:[/*#__PURE__*/_jsx(\"label\",{className:'eventUploadTitle',children:\"Upload A Cover Photo\"}),/*#__PURE__*/_jsx(\"input\",{required:true,type:\"file\",className:\"form-control\",onChange:onInputChange})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group files\",children:[/*#__PURE__*/_jsx(\"label\",{className:'eventUploadTitle',children:\"Upload Inner Photos\"}),/*#__PURE__*/_jsx(\"input\",{required:true,type:\"file\",className:\"form-control\",onChange:onInputChangeMultiple,multiple:true})]})]}),/*#__PURE__*/_jsxs(Col,{children:[/*#__PURE__*/_jsx(\"p\",{children:\"Title\"}),/*#__PURE__*/_jsx(\"textarea\",{id:\"textarea-content-1\",required:true,rows:\"3\",cols:\"45\",type:\"text\",onBlur:function onBlur(e){setTitle(e.target.value);}}),/*#__PURE__*/_jsx(\"p\",{children:\"Brief\"}),/*#__PURE__*/_jsx(\"textarea\",{id:\"textarea-content-2\",required:true,rows:\"3\",cols:\"45\",type:\"text\",onBlur:function onBlur(e){setBrief(e.target.value);}}),/*#__PURE__*/_jsx(\"p\",{children:\"Paragraph\"}),/*#__PURE__*/_jsx(\"textarea\",{id:\"textarea-content-3\",required:true,rows:\"5\",cols:\"45\",type:\"text\",onBlur:function onBlur(e){setParagraph(e.target.value);}}),/*#__PURE__*/_jsx(DatePicker,{onChange:dateHandler}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"info\",children:\"Submit\"})]})]})});}","map":{"version":3,"sources":["F:/Website/SCMP WebDev/client/src/components/admin/Eventuploader.jsx"],"names":["React","getFullDate","useState","axios","toast","DatePicker","Row","Button","Col","useNavigate","Uploader","files","setFiles","file","setFile","Date","date","setDate","brief","setBrief","title","setTitle","paragraph","setParagraph","navigate","FinalDate","dateHandler","toString","onInputChangeMultiple","e","target","onInputChange","onSubmitFile","preventDefault","data","FormData","console","log","i","length","append","text","window","confirm","post","then","success","setTimeout","catch","error","value"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport { getFullDate } from \"./getFullDate\";\r\nimport \"./uploader.css\";\r\nimport { useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport { toast } from \"react-toastify\"\r\nimport DatePicker from 'sassy-datepicker'\r\nimport { Row,Button, Col } from \"react-bootstrap\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nexport default function Uploader() {\r\n  const [files, setFiles] = useState([]);\r\n  const [file, setFile] = useState([]);\r\n  const [date, setDate] = useState(new Date());\r\nconst [brief, setBrief] = useState('');\r\nconst [title, setTitle] = useState('')\r\nconst [paragraph, setParagraph] = useState('')\r\nlet navigate=useNavigate()\r\nvar FinalDate=\"\"\r\n  const dateHandler = async(date) => {\r\n   FinalDate=getFullDate(date.toString());\r\n   await  setDate(FinalDate)\r\n\r\n  };\r\n\r\n\r\n  const onInputChangeMultiple = async (e) => {\r\n\r\n    await setFiles(e.target.files); \r\n  };\r\n  const onInputChange=async(e)=>{\r\n    await setFile(e.target.files) \r\n  }\r\n\r\n  const onSubmitFile =async (e) => {\r\n    e.preventDefault();\r\n    const data = new FormData(); \r\n    console.log(files)\r\n    console.log(file)\r\n    for (let i = 0; i < files.length; i++) { \r\n    \r\n    \r\n      data.append(\"file2\", files[i]);  \r\n       \r\n      }\r\n   data.append(\"file\", file[0]); \r\n      /*  data.append(\"title\",title)\r\n      data.append(\"brief\",brief)\r\n      data.append(\"paragraph\",paragraph)\r\n      data.append(\"date\",date)  */\r\n      const text=\r\ndata.append('title',title)\r\ndata.append('brief',brief)\r\ndata.append('paragraph',paragraph)\r\ndata.append('date',date)\r\n\r\nif (window.confirm(\"Press a button!\")) {await axios.post(\"http://188.166.60.231:3002/api/EventUpload\", data)\r\n      .then((e) => {\r\n     \r\n         toast.success(\"Upload success\");\r\n    setTimeout(() => {\r\n      navigate(\"/Events\")\r\n    }, 3000);\r\n        \r\n       \r\n      })\r\n      .catch((e) => {\r\n      console.log(e)\r\n        toast.error(\"Upload error\");\r\n      });  \r\n    }\r\n}\r\n\r\n  return (\r\n    <form method=\"post\" action=\"#\" id=\"#\" className={'eventForm'} onSubmit={onSubmitFile}>\r\n   <Row><Col><div className=\"form-group files\">\r\n        <label className={'eventUploadTitle'}>Upload A Cover Photo</label>\r\n        <input\r\n        required\r\n          type=\"file\"\r\n          className=\"form-control\"\r\n          onChange={onInputChange}\r\n         \r\n        />\r\n      </div>\r\n      <br/>\r\n      <div className=\"form-group files\">\r\n        <label className={'eventUploadTitle'}>Upload Inner Photos</label>\r\n        <input\r\n        required\r\n          type=\"file\"\r\n          className=\"form-control\"\r\n          onChange={onInputChangeMultiple}\r\n          multiple\r\n        />\r\n      </div></Col>\r\n      <Col><p>Title</p>\r\n<textarea id=\"textarea-content-1\" required rows=\"3\" cols=\"45\" type=\"text\"  onBlur={(e)=>{setTitle(e.target.value)}} />\r\n<p>Brief</p>\r\n<textarea  id=\"textarea-content-2\" required rows=\"3\" cols=\"45\" type=\"text\"   onBlur={(e)=>{setBrief(e.target.value)}} />\r\n<p>Paragraph</p>\r\n<textarea id=\"textarea-content-3\" required rows=\"5\" cols=\"45\" type=\"text\"  onBlur={(e)=>{setParagraph(e.target.value)}} />\r\n\r\n\r\n    <DatePicker onChange={dateHandler}  />\r\n \r\n\r\n    <br/>\r\n <Button type=\"submit\" variant=\"info\">Submit</Button></Col>\r\n      </Row> \r\n    </form>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}